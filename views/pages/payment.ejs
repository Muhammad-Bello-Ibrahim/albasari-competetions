<!-- Font Awesome CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="/styles/payment.css">
<!-- paystack cdn -->
<script src="https://js.paystack.co/v1/inline.js"></script>


<div class="container">
    <div>
        <%- include('../partials/nav') %>
            <main class="main">
                <div class="invoice_container">
                    <div class="main_header">
                        <div class="logo">
                            <img src="/img/basari.png" alt="">
                        </div>
                        <div class="header_content">
                            <h3 class="name">ALBASARY ISLAMIC ACADEMY</h3>
                            <p class="tag">COMMITTEE FOR QUR'ANIC COMPETITION AND DIGITAL AWARENESS</p>
                            <div class="head_contact">
                                <p>Payment Invoice</p>
                            </div>
                        </div>
                    </div>
                    <table>
                        <tr>
                            <th>School Name:</th>
                            <td> Al'Imtiyaz Academy</td>
                        </tr>
                        <tr>
                            <th>Bieng paid for:</th>
                            <td> Musabaqah and Hadith Quiz Enrollment</td>
                        </tr>
                        <tr>
                            <th>Amount N:</th>
                            <td> 5000</td>
                        </tr>
                        <tr>
                            <th>Transaction ID:</th>
                            <td> Al'Imtiyaz Academy</td>
                        </tr>
                        <tr>
                            <th>Date/Time:</th>
                            <td> 03:00pm 23/23/2023</td>
                        </tr>
                    </table>
                    <div class="btn_container">
                        <div class="pay-btn" onclick="payWithPaystack()">Pay Now</div>
                    </div>
                </div>
                
            </main>
            <%- include('../partials/hamburger.ejs') %>
    </div>
</div>
<script defer>
    document.addEventListener('DOMContentLoaded', () => {
        // Toggle the menu open/close
        const hamburger = document.querySelector('.hamburger');
        const mainNav = document.querySelector('.main_nav');

        if (hamburger) {
            hamburger.addEventListener('click', () => {
                mainNav.classList.toggle('open');
            });
        }
    });
    // paystack payment function
    function payWithPaystack() {
        const handler = PaystackPop.setup({
            key: 'pk_test_c27e70d428e6ee4bbfdbcc8437cbdd2dfafd3593',
            email: 'customer@example.com', // Customer's email
            amount: 5000 * 100, // Amount in kobo (e.g., 5000 NGN = 500000 kobo)
            currency: 'NGN',
            ref: `REF_${Math.floor(Math.random() * 1000000000)}`,
            callback: function (response) {
                alert('Payment successful! Reference: ' + response.reference);
                // Call your backend here to verify the payment
            },
            onClose: function () {
                alert('Payment window closed.');
            },
        });
        handler.openIframe();
    }

</script>